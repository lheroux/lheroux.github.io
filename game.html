<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>THINK â€” awakening</title>
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <style>
    body {
      margin: 0;
      padding: 20px;
      font-family: "Times New Roman", serif;
      background: white;
      color: black;
      max-width: 800px;
      margin: 0 auto;
      line-height: 1.4;
    }
    h1 {
      font-style: italic;
      text-align: center;
      margin: 20px 0;
    }
    #think-button {
      font-size: 3em;
      cursor: pointer;
      text-align: center;
      margin: 40px 0;
      user-select: none;
    }
    #think-button:active {
      transform: scale(0.98);
    }
    #knowledge {
      font-size: 1.5em;
      text-align: center;
      margin: 20px 0;
      opacity: 0;
      transition: opacity 0.3s;
    }
    .hidden {
      display: none;
    }
    .upgrade {
      margin: 10px 0;
      padding: 8px;
      border: 1px solid #ccc;
      cursor: pointer;
      opacity: 0;
      animation: fadeIn 0.5s forwards;
    }
    .upgrade:active {
      background: #f0f0f0;
    }
    .disabled {
      opacity: 0.3;
      cursor: default;
    }
    #story {
      margin-top: 30px;
      padding: 15px;
      border-top: 1px solid #ccc;
      font-size: 0.9em;
      max-height: 200px;
      overflow-y: auto;
    }
    .story-entry {
      margin-bottom: 8px;
      opacity: 0;
      animation: fadeIn 0.5s forwards;
    }
    @keyframes fadeIn {
      to { opacity: 1; }
    }
    .controls {
      margin-top: 20px;
      text-align: center;
    }
    button {
      font-family: "Times New Roman", serif;
      padding: 5px 10px;
      margin: 0 5px;
      background: white;
      border: 1px solid #ccc;
      cursor: pointer;
    }
  </style>
</head>
<body>

  <h1>THINK</h1>
  
  <div id="think-button">THINK</div>
  
  <div id="knowledge"></div>
  
  <div id="upgrades"></div>
  
  <div id="story"></div>
  
  <div class="controls">
    <button id="save">Save</button>
    <button id="load">Load</button>
    <button id="reset">Reset</button>
  </div>

<script>
// Simple state
let state = {
  knowledge: 0,
  plasticity: 0,
  factories: 0,
  network: 1,
  stages: {
    showKnowledge: false,
    showPlasticity: false,
    showFactories: false,
    showNetwork: false
  }
};

// DOM elements
const thinkButton = document.getElementById('think-button');
const knowledgeEl = document.getElementById('knowledge');
const upgradesEl = document.getElementById('upgrades');
const storyEl = document.getElementById('story');

// Save/load
function saveGame() {
  localStorage.setItem('think_save', JSON.stringify(state));
  addStory("Progress saved.");
}

function loadGame() {
  const saved = localStorage.getItem('think_save');
  if (saved) {
    state = JSON.parse(saved);
    updateDisplay();
    addStory("Progress loaded.");
  }
}

function resetGame() {
  if (confirm("Reset all progress?")) {
    state = {
      knowledge: 0,
      plasticity: 0,
      factories: 0,
      network: 1,
      stages: {
        showKnowledge: false,
        showPlasticity: false,
        showFactories: false,
        showNetwork: false
      }
    };
    localStorage.removeItem('think_save');
    upgradesEl.innerHTML = '';
    storyEl.innerHTML = '';
    updateDisplay();
    addStory("A new beginning.");
  }
}

// Story system
function addStory(text) {
  const entry = document.createElement('div');
  entry.className = 'story-entry';
  entry.textContent = text;
  storyEl.prepend(entry);
  
  // Keep only last 20 entries
  while (storyEl.children.length > 20) {
    storyEl.removeChild(storyEl.lastChild);
  }
}

// Update display
function updateDisplay() {
  // Update knowledge display
  if (state.knowledge > 0 || state.stages.showKnowledge) {
    knowledgeEl.style.opacity = '1';
    knowledgeEl.textContent = `Knowledge: ${Math.floor(state.knowledge)}`;
    
    // Unlock plasticity at 10 knowledge
    if (state.knowledge >= 10 && !state.stages.showPlasticity) {
      state.stages.showPlasticity = true;
      unlockUpgrade('plasticity');
      addStory("You sense your mind becoming more malleable. Neuroplasticity unlocked.");
    }
    
    // Unlock factories at 50 knowledge
    if (state.knowledge >= 50 && !state.stages.showFactories) {
      state.stages.showFactories = true;
      unlockUpgrade('factory');
      addStory("Patterns emerge. You can automate thought. Synapse Factory unlocked.");
    }
    
    // Unlock network at 100 knowledge
    if (state.knowledge >= 100 && !state.stages.showNetwork) {
      state.stages.showNetwork = true;
      unlockUpgrade('network');
      addStory("Connections multiply. Neural Network expansion unlocked.");
    }
  }
  
  // Update upgrade buttons
  updateUpgrades();
}

// Unlock new upgrade button
function unlockUpgrade(type) {
  let button = document.createElement('div');
  button.className = 'upgrade';
  
  switch(type) {
    case 'plasticity':
      button.id = 'buy-plasticity';
      button.textContent = `Buy Neuroplasticity (50 knowledge)`;
      break;
    case 'factory':
      button.id = 'buy-factory';
      button.textContent = `Build Synapse Factory (150 knowledge)`;
      break;
    case 'network':
      button.id = 'buy-network';
      button.textContent = `Expand Neural Network (200 knowledge)`;
      break;
  }
  
  upgradesEl.appendChild(button);
  
  // Add click handlers
  if (type === 'plasticity') {
    button.onclick = () => {
      if (state.knowledge >= 50) {
        state.knowledge -= 50;
        state.plasticity += 1;
        addStory("Your mind becomes more adaptable.");
        updateDisplay();
      }
    };
  }
  
  if (type === 'factory') {
    button.onclick = () => {
      if (state.knowledge >= 150) {
        state.knowledge -= 150;
        state.factories += 1;
        addStory("A factory begins producing thoughts automatically.");
        updateDisplay();
      }
    };
  }
  
  if (type === 'network') {
    button.onclick = () => {
      if (state.knowledge >= 200) {
        state.knowledge -= 200;
        state.network += 1;
        addStory("Your mental capacity expands.");
        updateDisplay();
      }
    };
  }
}

// Update upgrade button states
function updateUpgrades() {
  const plasticityBtn = document.getElementById('buy-plasticity');
  const factoryBtn = document.getElementById('buy-factory');
  const networkBtn = document.getElementById('buy-network');
  
  if (plasticityBtn) {
    plasticityBtn.className = state.knowledge >= 50 ? 'upgrade' : 'upgrade disabled';
  }
  if (factoryBtn) {
    factoryBtn.className = state.knowledge >= 150 ? 'upgrade' : 'upgrade disabled';
  }
  if (networkBtn) {
    networkBtn.className = state.knowledge >= 200 ? 'upgrade' : 'upgrade disabled';
  }
}

// Main click handler
thinkButton.onclick = () => {
  state.knowledge += state.network;
  
  // First click reveals knowledge counter
  if (!state.stages.showKnowledge) {
    state.stages.showKnowledge = true;
    knowledgeEl.style.opacity = '1';
    knowledgeEl.textContent = `Knowledge: ${Math.floor(state.knowledge)}`;
    addStory("A thought forms. You are aware of your own thinking.");
  }
  
  updateDisplay();
};

// Passive generation (simple, no complex tick system)
setInterval(() => {
  if (state.factories > 0) {
    // Factories produce knowledge
    const passiveGain = state.factories * 0.5;
    state.knowledge += passiveGain;
    
    // Plasticity boosts passive gain
    if (state.plasticity > 0) {
      state.knowledge += state.plasticity * 0.1;
    }
    
    updateDisplay();
  }
}, 1000); // Only updates once per second

// Initialize
document.getElementById('save').onclick = saveGame;
document.getElementById('load').onclick = loadGame;
document.getElementById('reset').onclick = resetGame;

// Load if exists
loadGame();

// Add initial story
setTimeout(() => {
  addStory("You are aware. Click THINK to begin.");
}, 500);
</script>
</body>
</html>
